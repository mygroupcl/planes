function PaymentMethod(c,d,b,a,e){this.name=c;this.creditCard=d;this.cardType=b;this.cardCvv=a;this.cardHolderName=e}PaymentMethod.prototype.getName=function(){return this.name};PaymentMethod.prototype.getCreditCard=function(){return this.creditCard};PaymentMethod.prototype.getCardType=function(){return this.cardType};PaymentMethod.prototype.getCardCvv=function(){return this.cardCvv};PaymentMethod.prototype.getCardHolderName=function(){return this.cardHolderName};function PaymentMethods(){this.length=0;this.methods=new Array()}PaymentMethods.prototype.Add=function(a){this.methods[this.length]=a;this.length=this.length+1};PaymentMethods.prototype.Find=function(a){for(var b=0;b<this.length;b++){if(this.methods[b].name==a){return this.methods[b]}}return null};var stripeResponseHandler=function(a,b){OSM.jQuery(function(e){var c=e("#os_form");if(b.error){alert(b.error.message);c.find("#btn-submit").prop("disabled",false)}else{var d=b.id;e("#x_card_num").val("");e("#x_card_code").val("");e("#card_holder_name").val("");c.append(e('<input type="hidden" name="stripeToken" />').val(d));c.get(0).submit()}})};OSM.jQuery(function(a){OSMVALIDATEFORM=(function(b){a(b).validationEngine("attach",{onValidationComplete:function(d,c){if(c==true){d.on("submit",function(f){f.preventDefault()});return true}return false}})});changePaymentMethod=(function(){updatePaymentMethod();if(document.os_form.show_payment_fee.value==1){calculateSubscriptionFee()}});updatePaymentMethod=(function(){var c=document.os_form;if(a("input:radio[name^=payment_method]").length){var b=a("input:radio[name^=payment_method]:checked").val()}else{var b=a("input[name^=payment_method]").val()}method=methods.Find(b);if(!method){return}if(method.getCreditCard()){a("#tr_card_number").show();a("#tr_exp_date").show();a("#tr_cvv_code").show();if(method.getCardHolderName()){a("#tr_card_holder_name").show()}else{a("#tr_card_holder_name").show()}}else{a("#tr_card_number").hide();a("#tr_exp_date").hide();a("#tr_cvv_code").hide();a("#tr_card_holder_name").hide()}});calculateSubscriptionFee=(function(){if(a("input:radio[name^=payment_method]").length){var b=a("input:radio[name^=payment_method]:checked").val()}else{var b=a("input[name^=payment_method]").val()}if(typeof b=="undefined"){return}a("#btn-submit").attr("disabled","disabled");a("#ajax-loading-animation").show();a.ajax({type:"POST",url:siteUrl+"index.php?option=com_osmembership&task=register.calculate_subscription_fee&payment_method="+b+langLinkForAjax,data:a("#os_form input[name='plan_id'], #os_form input[name='coupon_code'], #os_form select[name='country'], #os_form select[name='state'], #os_form input.taxable[type='text'], #os_form input[name='coupon_code'], #os_form input[name='act'], #os_form input[name='renew_option_id'], #os_form input[name='upgrade_option_id'], #os_form .payment-calculation input[type='text'], #os_form .payment-calculation input[type='checkbox']:checked, #os_form .payment-calculation input[type='radio']:checked, #os_form .payment-calculation select"),dataType:"json",success:function(e,f,d){a("#btn-submit").removeAttr("disabled");a("#ajax-loading-animation").hide();if(a("#amount").length){a("#amount").val(e.amount);if(a("#discount_amount").length){a("#discount_amount").val(e.discount_amount)}if(a("#tax_amount").length){a("#tax_amount").val(e.tax_amount)}if(a("#payment_processing_fee").length){a("#payment_processing_fee").val(e.payment_processing_fee)}if(a("#gross_amount").length){a("#gross_amount").val(e.gross_amount)}}if(a("#payment-terms").length){a("#payment-terms").html(e.payment_terms);if(a("#trial_amount").length){a("#trial_amount").val(e.trial_amount);a("#trial_discount_amount").val(e.trial_discount_amount);if(e.trial_discount_amount>0){a("#trial_discount_amount_container").show()}else{a("#trial_discount_amount_container").hide()}a("#trial_tax_amount").val(e.trial_tax_amount);if(e.trial_tax_amount>0){a("#trial_tax_amount_container").show()}else{a("#trial_tax_amount_container").hide()}a("#trial_payment_processing_fee").val(e.trial_payment_processing_fee);if(e.trial_payment_processing_fee>0){a("#trial_payment_processing_fee_container").show()}else{a("#trial_payment_processing_fee_container").hide()}a("#trial_gross_amount").val(e.trial_gross_amount);if(e.trial_discount_amount>0||e.trial_tax_amount>0||e.trial_payment_processing_fee>0){a("#trial_gross_amount_container").show()}else{a("#trial_gross_amount_container").hide()}}a("#regular_amount").val(e.regular_amount);a("#regular_discount_amount").val(e.regular_discount_amount);if(e.regular_discount_amount>0){a("#regular_discount_amount_container").show()}else{a("#regular_discount_amount_container").hide()}a("#regular_tax_amount").val(e.regular_tax_amount);if(e.regular_tax_amount>0){a("#regular_tax_amount_container").show()}else{a("#regular_tax_amount_container").hide()}a("#regular_payment_processing_fee").val(e.regular_payment_processing_fee);if(e.regular_payment_processing_fee>0){a("#regular_payment_processing_fee_container").show()}else{a("#regular_payment_processing_fee_container").hide()}a("#regular_gross_amount").val(e.regular_gross_amount);if(e.regular_discount_amount>0||e.regular_tax_amount>0||e.regular_payment_processing_fee>0){a("#regular_gross_amount_container").show()}else{a("#regular_gross_amount_container").hide()}}if(a("#vat_country_code")){if(e.country_code=="GR"){a("#vat_country_code").text("EL")}else{a("#vat_country_code").text(e.country_code)}}var c=a("input[name^=vat_number_field]").val();if(c){if(e.show_vat_number_field==1){a("#field_"+c).show()}else{a("#field_"+c).hide()}}if(e.show_payment_information==0){a(".payment_information").css("display","none")}else{a(".payment_information").css("display","");updatePaymentMethod()}if(e.coupon_valid==1){a("#coupon_validate_msg").hide()}else{a("#coupon_validate_msg").show()}if(e.vatnumber_valid==1){a("#vatnumber_validate_msg").hide()}else{a("#vatnumber_validate_msg").show()}},error:function(c,e,d){alert(e)}})});showHideDependFields=(function(c,d,b){masterFieldsSelector=".master-field input[type='checkbox']:checked, .master-field input[type='radio']:checked, .master-field select";a("#btn-submit").attr("disabled","disabled");a("#ajax-loading-animation").show();a.ajax({type:"POST",url:siteUrl+"index.php?option=com_osmembership&task=register.get_depend_fields_status&field_id="+c+langLinkForAjax,data:a(masterFieldsSelector),dataType:"json",success:function(j,k,h){a("#btn-submit").removeAttr("disabled");a("#ajax-loading-animation").hide();var f=j.hide_fields.split(",");var g=j.show_fields.split(",");for(var e=0;e<f.length;e++){a("#"+f[e]).hide()}for(var e=0;e<g.length;e++){a("#"+g[e]).show()}calculateSubscriptionFee()},error:function(e,g,f){alert(g)}})});buildStateField=(function(d,c,b){if(a("#"+d).length&&a("#"+d).is("select")){if(a("#"+c).length){var e=a("#"+c).val()}else{var e=""}a.ajax({type:"GET",url:siteUrl+"index.php?option=com_osmembership&task=register.get_states&country_name="+e+"&field_name="+d+"&state_name="+b+langLinkForAjax,success:function(f){if(a("#field_"+d+" .controls").length){a("#field_"+d+" .controls").html(f)}else{a("#field_"+d+" .col-md-9").html(f)}if(typeof taxStateCountries!="undefined"){if(d=="state"&&taxStateCountries[0]){a("#state").change(function(){if(a("#"+c).length){var g=a("#country").val()}else{var g=a("#default_country").val()}if(g&&(a.inArray(g,taxStateCountries)!=-1)){calculateSubscriptionFee()}})}}},error:function(f,h,g){alert(h)}});if(a("#"+c).length){a("#"+c).change(function(){a.ajax({type:"GET",url:siteUrl+"index.php?option=com_osmembership&task=register.get_states&country_name="+a(this).val()+"&field_name="+d+"&state_name="+b+langLinkForAjax,success:function(g){if(a("#field_"+d+" .controls").length){a("#field_"+d+" .controls").html(g)}else{a("#field_"+d+" .col-md-9").html(g)}if(typeof taxStateCountries!="undefined"){if(d=="state"&&taxStateCountries[0]){a("#state").change(function(){if(a("#country").length){var h=a("#country").val()}else{var h=""}if(h&&(a.inArray(h,taxStateCountries)!=-1)){calculateSubscriptionFee()}})}}},error:function(g,i,h){alert(i)}});var f=paymentMethod=a("input[name^=country_base_tax]").val();if(f!=0){calculateSubscriptionFee()}})}}else{if(a("#"+c).length){a("#"+c).change(function(){var f=paymentMethod=a("input[name^=country_base_tax]").val();if(f!=0){calculateSubscriptionFee()}})}}})});